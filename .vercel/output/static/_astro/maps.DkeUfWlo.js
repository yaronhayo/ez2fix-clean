import{s as c,c as p}from"./env.Bkuo8SaN.js";async function f(){if(typeof window>"u")throw new Error("Google Maps can only be initialized on client side");if(!(window.google&&window.google.maps))return new Promise((e,n)=>{const o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${p.googleMaps.apiKey}&libraries=places&callback=initMap`,o.async=!0,o.defer=!0,window.initMap=()=>{e()},o.onerror=()=>{n(new Error("Failed to load Google Maps script"))},document.head.appendChild(o)})}const a={center:c.business.coordinates,radius:c.serviceArea.radiusMiles,primaryAreas:c.serviceArea.primaryAreas};function u(e,n={}){const{showRadius:o=!0,showMarkers:t=!0,interactive:r=!0}=n,i={center:a.center,zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!r,gestureHandling:r?"cooperative":"none",styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]}]},s=new google.maps.Map(e,i),l=new google.maps.Marker({position:a.center,map:s,title:c.business.name,icon:{url:"data:image/svg+xml;base64,"+btoa(`
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="18" fill="#D2A63C" stroke="#1D1912" stroke-width="2"/>
          <circle cx="20" cy="20" r="6" fill="#1D1912"/>
        </svg>
      `),scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)}}),g=new google.maps.InfoWindow({content:`
      <div style="padding: 10px; max-width: 200px;">
        <h3 style="margin: 0 0 5px 0; color: #1D1912;">${c.business.name}</h3>
        <p style="margin: 0 0 5px 0; color: #BB8525;">Licensed Garage Door Service</p>
        <p style="margin: 0; color: #D2A63C; font-weight: bold;">${c.business.phone}</p>
      </div>
    `});return l.addListener("click",()=>{g.open(s,l)}),o&&new google.maps.Circle({strokeColor:"#D2A63C",strokeOpacity:.8,strokeWeight:2,fillColor:"#D2A63C",fillOpacity:.15,map:s,center:a.center,radius:a.radius*1609.34}),t&&d(s),s}async function d(e){new google.maps.Geocoder;const n=new google.maps.LatLngBounds;for(const o of a.primaryAreas)try{const t=await m(`${o}, NJ`);if(t){const r=new google.maps.Marker({position:t,map:e,title:`${o}, NJ - We serve this area!`,icon:{url:"data:image/svg+xml;base64,"+btoa(`
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#EECD5C" stroke="#1D1912" stroke-width="1"/>
                <circle cx="12" cy="12" r="3" fill="#1D1912"/>
              </svg>
            `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)}});n.extend(t),r.addListener("click",()=>{new google.maps.InfoWindow({content:`
              <div style="padding: 8px;">
                <h4 style="margin: 0 0 5px 0; color: #1D1912;">${o}, NJ</h4>
                <p style="margin: 0; color: #BB8525; font-size: 12px;">We provide garage door service in this area</p>
              </div>
            `}).open(e,r)})}}catch{}}function m(e){return new Promise(n=>{new google.maps.Geocoder().geocode({address:e},(t,r)=>{r===google.maps.GeocoderStatus.OK&&t&&t[0]?n(t[0].geometry.location):n(null)})})}function y(e,n={}){const o={types:["address"],componentRestrictions:{country:"US"}};if(n.restrictToServiceArea){const r=new google.maps.LatLngBounds,i=new google.maps.LatLng(a.center.lat,a.center.lng),s=a.radius/69;r.extend(new google.maps.LatLng(i.lat()-s,i.lng()-s)),r.extend(new google.maps.LatLng(i.lat()+s,i.lng()+s)),o.bounds=r,o.strictBounds=!0}const t=new google.maps.places.Autocomplete(e,o);return n.onPlaceSelected&&t.addListener("place_changed",()=>{const r=t.getPlace();n.onPlaceSelected(r)}),t}function h(e){const n=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng),o=new google.maps.LatLng(a.center.lat,a.center.lng),t=google.maps.geometry.spherical.computeDistanceBetween(o,n),r=a.radius*1609.34;return t<=r}async function v(){const e=await fetch("/api/service-areas?type=service-areas");if(!e.ok)throw new Error("Failed to fetch service area data");return e.json()}async function L(e={}){const n=new URLSearchParams({type:"static",width:(e.width||600).toString(),height:(e.height||400).toString(),zoom:(e.zoom||11).toString()}),o=await fetch(`/api/service-areas?${n.toString()}`);if(!o.ok)throw new Error("Failed to fetch static map URL");return(await o.json()).url}export{u as createServiceAreaMap,v as fetchServiceAreaMapData,L as fetchStaticMapUrl,f as initializeGoogleMaps,h as isAddressInServiceArea,a as serviceAreaConfig,y as setupAddressAutocomplete};
