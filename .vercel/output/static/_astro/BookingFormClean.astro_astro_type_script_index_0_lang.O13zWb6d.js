const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/recaptcha.BG0E8c0o.js","_astro/env.DH0pXKwG.js","_astro/maps.BoIP38W7.js"])))=>i.map(i=>d[i]);
const P="modulepreload",L=function(y){return"/"+y},w={},E=function(v,m,g){let h=Promise.resolve();if(m&&m.length>0){let e=function(r){return Promise.all(r.map(s=>Promise.resolve(s).then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),c=t?.nonce||t?.getAttribute("nonce");h=e(m.map(r=>{if(r=L(r),r in w)return;w[r]=!0;const s=r.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":P,s||(o.as="script"),o.crossOrigin="",o.href=r,c&&o.setAttribute("nonce",c),document.head.appendChild(o),s)return new Promise((l,n)=>{o.addEventListener("load",l),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${r}`)))})}))}function f(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return h.then(e=>{for(const t of e||[])t.status==="rejected"&&f(t.reason);return v().catch(f)})};document.addEventListener("DOMContentLoaded",async function(){try{const{loadRecaptcha:e}=await E(async()=>{const{loadRecaptcha:t}=await import("./recaptcha.BG0E8c0o.js");return{loadRecaptcha:t}},__vite__mapDeps([0,1]));await e()}catch(e){console.error("Failed to load reCAPTCHA:",e)}document.querySelectorAll('[id^="booking-form-"]').forEach(e=>{const t=e.dataset.variant;e.querySelector(`#phone-${t}`)?.addEventListener("input",function(){const o=this.value.replace(/\D/g,"");o.length>=10&&(this.value=`(${o.slice(0,3)}) ${o.slice(3,6)}-${o.slice(6,10)}`)});const r=e.querySelector(`#address-${t}`),s=e.querySelector(`#address-expanded-${t}`);r&&v(r,s,t),e.querySelectorAll("input, select, textarea").forEach(o=>{o.addEventListener("input",function(){g(this.name,t)})}),e.addEventListener("submit",async function(o){o.preventDefault();const l=new FormData(e),n=Object.fromEntries(l),u=t==="hero"?["name","phone","service","address","consent"]:["name","phone","email","service","urgency","address","consent"];let a=!1;if(u.forEach(d=>{(d==="consent"?n[d]:n[d]?.trim())||(m(d,"This field is required.",t),a=!0)}),n.email&&!h(n.email.trim())&&(m("email","Please enter a valid email address.",t),a=!0),n.phone&&!f(n.phone.trim())&&(m("phone","Please enter a valid phone number.",t),a=!0),a)return;const p=e.querySelector('a[class*="btn"]')||e.querySelector("button"),$=p.textContent;p.innerHTML='<svg class="animate-spin h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Submitting...',p.style.pointerEvents="none";try{const{executeRecaptcha:d}=await E(async()=>{const{executeRecaptcha:_}=await import("./recaptcha.BG0E8c0o.js");return{executeRecaptcha:_}},__vite__mapDeps([0,1])),b=await d("booking_form"),S=n.address.trim()+(n.city?`, ${n.city.trim()}`:"")+(n.state?`, ${n.state.trim()}`:", NJ")+(n.zip?` ${n.zip.trim()}`:"")+(n.unit?`, Unit ${n.unit.trim()}`:"");if((await fetch("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name.trim(),email:n.email?.trim()||"",phone:n.phone.trim(),address:S,service:n.service,urgency:n.urgency||"flexible",description:n.notes?.trim()||"",recaptchaToken:b,consent:n.consent,source:"website_form"})})).ok)window.location.href="/thank-you";else throw new Error("Submission failed")}catch(d){console.error("Form submission error:",d),alert("Sorry, there was an error submitting your request. Please try again or call us directly at (201) 554-6769"),p.innerHTML=$,p.style.pointerEvents="auto"}})});function v(e,t,c){E(()=>import("./maps.BoIP38W7.js"),__vite__mapDeps([2,1])).then(async({initializeGoogleMaps:r,setupAddressAutocomplete:s})=>{try{await r();const i=s(e,{restrictToServiceArea:!0,onPlaceSelected:o=>{if(o.address_components&&t){t.classList.remove("hidden");const l=e.closest("form").querySelector(`#city-${c}`),n=e.closest("form").querySelector(`#zip-${c}`);o.address_components.forEach(u=>{const a=u.types;a.includes("locality")&&l&&(l.value=u.long_name),a.includes("postal_code")&&n&&(n.value=u.long_name)})}}})}catch(i){console.warn("Google Maps autocomplete not available, using fallback:",i)}}).catch(()=>{console.warn("Google Maps module not available, using manual parsing")}),e?.addEventListener("input",function(){const r=this.value.trim();if((r.length>10||r.includes(","))&&(t?.classList.remove("hidden"),r.includes(","))){const s=r.split(",").map(i=>i.trim());if(s.length>=2){const i=e.closest("form"),o=i.querySelector(`#city-${c}`),l=i.querySelector(`#zip-${c}`),n=s[s.length-1],u=n.match(/\b\d{5}(-\d{4})?\b/);if(u&&l){l.value=u[0];const a=n.replace(u[0],"").replace(/\s*NJ\s*/i,"").trim();a&&o&&(o.value=a)}else s.length>=2&&o&&(o.value=s[1])}}})}function m(e,t,c){const r=document.getElementById(`${e}-error-${c}`),s=document.getElementById(`${e}-${c}`);r&&s&&(r.textContent=t,r.classList.remove("hidden"),s.style.borderColor="#ef4444",s.scrollIntoView({behavior:"smooth",block:"center"}))}function g(e,t){const c=document.getElementById(`${e}-error-${t}`),r=document.getElementById(`${e}-${t}`);c&&r&&(c.classList.add("hidden"),r.style.borderColor="")}function h(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function f(e){return e.replace(/\D/g,"").length===10}});
